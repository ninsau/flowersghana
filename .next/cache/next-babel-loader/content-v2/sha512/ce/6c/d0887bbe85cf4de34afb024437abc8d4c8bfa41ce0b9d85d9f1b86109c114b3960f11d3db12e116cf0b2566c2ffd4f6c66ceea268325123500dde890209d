{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/* eslint-disable no-use-before-define */\nimport React, { useEffect, useState } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { DataStore } from \"aws-amplify\";\nimport { Bouquets } from \"../../media/models\";\nimport Link from \"next/link\";\nimport Fuse from \"fuse.js\";\nimport { useRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport { Typography } from \"@material-ui/core\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport AddToCartComponent from \"../../cart/addToCart\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\nimport { CardContent } from \"@material-ui/core\";\nimport { Chip } from \"@material-ui/core\";\nexport default function SearchComponent() {\n  var router = useRouter();\n  var slug = router.query.slug;\n\n  var _useState = useState([]),\n      bouquets = _useState[0],\n      setBouquets = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      searchParam = _useState2[0],\n      setSearchParam = _useState2[1];\n\n  var options = [\"cheapest\", \"biggest\", \"love\", \"romance\", \"grand\", \"roses\", \"chrysanthemums\"];\n  useEffect(function () {\n    fetchPosts();\n\n    function fetchPosts() {\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    function _fetchPosts() {\n      _fetchPosts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var bouquetsData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return DataStore.query(Bouquets);\n\n              case 2:\n                bouquetsData = _context.sent;\n                setBouquets(bouquetsData);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    var subscription = DataStore.observe(Bouquets).subscribe(function () {\n      return fetchPosts();\n    });\n    return function () {\n      return subscription.unsubscribe();\n    };\n  }, []);\n  var option = {\n    includeScore: true,\n    keys: [\"title\", \"tags\", \"category\", \"description\", \"amount\"]\n  };\n  var toString = JSON.stringify(bouquets);\n  var toJson = JSON.parse(toString);\n  var fuse = new Fuse(toJson, option);\n  var result;\n\n  if (slug !== \"random\" || slug != undefined) {\n    if (searchParam === \"\") {\n      result = fuse.search(slug);\n    } else {\n      result = fuse.search(searchParam);\n    }\n  } else {\n    result = fuse.search(searchParam);\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: slug !== undefined && searchParam === \"\" ? /*#__PURE__*/_jsxs(\"title\", {\n        children: [\" \", \"Search '\".concat(slug, \"'\"), \"| FlowersGhana\"]\n      }) : /*#__PURE__*/_jsxs(\"title\", {\n        children: [\"Search '\".concat(searchParam, \"'\"), \" | FlowersGhana\"]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        margin: 20\n      },\n      children: /*#__PURE__*/_jsxs(Grid, {\n        container: true,\n        spacing: 0,\n        direction: \"column\",\n        alignItems: \"center\",\n        justify: \"center\",\n        children: [/*#__PURE__*/_jsxs(Grid, {\n          children: [/*#__PURE__*/_jsx(TextField, {\n            margin: \"dense\",\n            multiline: true,\n            id: \"review\",\n            label: \"Search by keyword(s)\",\n            type: \"text\",\n            variant: \"outlined\",\n            onChange: function onChange(e) {\n              return setSearchParam(e.target.value);\n            },\n            value: searchParam,\n            fullWidth: true\n          }), /*#__PURE__*/_jsx(Typography, {\n            variant: \"body2\",\n            color: \"textSecondary\",\n            component: \"p\",\n            children: \"Find an item by searching title, description, amount less than, or category.\"\n          })]\n        }), /*#__PURE__*/_jsx(Grid, {\n          style: {\n            margin: 20\n          },\n          children: options.map(function (option, i) {\n            return /*#__PURE__*/_jsx(\"sl-badge\", {\n              \"class\": \"search\",\n              onClick: function onClick() {\n                return setSearchParam(option);\n              },\n              type: \"info\",\n              children: option\n            }, i);\n          })\n        }), /*#__PURE__*/_jsx(Grid, {\n          style: {\n            margin: 20\n          },\n          children: result.length < 1 && /*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsxs(\"sl-alert\", {\n              type: \"danger\",\n              open: true,\n              children: [/*#__PURE__*/_jsx(\"sl-icon\", {\n                slot: \"icon\",\n                name: \"exclamation-octagon\"\n              }), /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Please try another keyword(s)\"\n              }), /*#__PURE__*/_jsx(\"br\", {}), \"No items found.\"]\n            })\n          })\n        }), /*#__PURE__*/_jsx(Grid, {\n          container: true,\n          item: true,\n          spacing: 3,\n          children: result.map(function (item, i) {\n            return /*#__PURE__*/_jsxs(Grid, {\n              item: true,\n              xs: 6,\n              md: 4,\n              children: [/*#__PURE__*/_jsx(Link, {\n                href: \"/bouquet/\".concat(item.item.slug),\n                children: /*#__PURE__*/_jsx(CardHeader, {\n                  title: item.item.title,\n                  avatar: /*#__PURE__*/_jsx(Chip, {\n                    label: \"\\u20B5\".concat(item.item.amount),\n                    color: \"secondary\"\n                  }),\n                  subheader: item.item.availability\n                })\n              }), /*#__PURE__*/_jsxs(CardContent, {\n                children: [/*#__PURE__*/_jsx(Link, {\n                  href: \"/bouquet/\".concat(item.item.slug),\n                  children: /*#__PURE__*/_jsx(LazyLoadImage, {\n                    slot: \"image\",\n                    delayTime: 500,\n                    placeholderSrc: \"https://res.cloudinary.com/deyudesls/image/upload/c_scale,q_100,w_200/v1627491504/flowersghana%20logo.webp\",\n                    effect: \"blur\",\n                    src: \"https://res.cloudinary.com/deyudesls/image/upload/c_scale,h_516,w_387/\".concat(item.item.img),\n                    alt: item.item.title,\n                    className: \"lazy\"\n                  })\n                }), /*#__PURE__*/_jsx(AddToCartComponent, {\n                  itemTitle: item.item.title,\n                  itemPrice: item.item.amount\n                })]\n              })]\n            }, i);\n          })\n        })]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}