{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mac/codespace/flowerghana/calls/categoryContent.js\",\n    _s = $RefreshSig$();\n\nimport Grid from \"@material-ui/core/Grid\";\nimport { DataStore, Predicates } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Bouquets } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Backdrop from \"../components/loader/backdrop\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport AddToCartComponent from \"../cart/addToCart\";\nimport SimpleSnackbar from \"../cart/snackbar\";\nimport { stateStore } from \"../cart/store\";\nimport Pagin from \"../components/utils/pagination\";\nimport Custom404Component from \"../components/utils/custom404\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\nimport { CardContent } from \"@material-ui/core\";\nimport Chip from \"@material-ui/core/Chip\";\nexport default function HomeContent() {\n  _s();\n\n  var _this = this;\n\n  var router = useRouter();\n  var slug = router.query.slug;\n\n  var _useState = useState([]),\n      bouquets = _useState[0],\n      setBouquets = _useState[1];\n\n  var _useState2 = useState(true),\n      returned = _useState2[0],\n      setReturned = _useState2[1];\n\n  var done = stateStore(function (state) {\n    return state.done;\n  });\n\n  var _useState3 = useState(0),\n      pageIndex = _useState3[0],\n      setPageIndex = _useState3[1];\n\n  useEffect(function () {\n    fetchPosts();\n\n    function fetchPosts() {\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    function _fetchPosts() {\n      _fetchPosts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var bouquetsData, _bouquetsData, _bouquetsData2;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(slug === undefined)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 3;\n                return DataStore.query(Bouquets, function (item) {\n                  return item.or(function (item) {\n                    return item.category(\"contains\", \"featured\").category(\"contains\", \"popular\");\n                  });\n                }, {\n                  page: 0,\n                  limit: 18\n                });\n\n              case 3:\n                bouquetsData = _context.sent;\n                setBouquets(bouquetsData);\n                _context.next = 18;\n                break;\n\n              case 7:\n                if (!(slug === \"all\")) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.next = 10;\n                return DataStore.query(Bouquets, Predicates.ALL, {\n                  page: pageIndex,\n                  limit: 18\n                });\n\n              case 10:\n                _bouquetsData = _context.sent;\n\n                if (_bouquetsData.length < 1) {\n                  setReturned(false);\n                } else {\n                  setBouquets(_bouquetsData);\n                }\n\n                _context.next = 18;\n                break;\n\n              case 14:\n                _context.next = 16;\n                return DataStore.query(Bouquets, function (item) {\n                  return item.or(function (item) {\n                    return item.category(\"contains\", slug).tags(\"contains\", slug).description(\"contains\", slug);\n                  });\n                }, {\n                  page: pageIndex,\n                  limit: 18\n                });\n\n              case 16:\n                _bouquetsData2 = _context.sent;\n\n                if (_bouquetsData2.length < 1) {\n                  setReturned(false);\n                } else {\n                  setBouquets(_bouquetsData2);\n                }\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    var subscription = DataStore.observe(Bouquets).subscribe(function () {\n      return fetchPosts();\n    });\n    return function () {\n      return subscription.unsubscribe();\n    };\n  }, [pageIndex]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [bouquets.length < 1 && returned === true && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), bouquets.length < 1 && returned === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Custom404Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), done === true && /*#__PURE__*/_jsxDEV(SimpleSnackbar, {\n      message: \"Item has been added to cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), bouquets.map(function (item, i) {\n      return /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 4,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: \"/bouquet/\".concat(item.slug),\n          children: /*#__PURE__*/_jsxDEV(CardHeader, {\n            style: {\n              minHeight: 100\n            },\n            title: item.title,\n            avatar: /*#__PURE__*/_jsxDEV(Chip, {\n              label: \"\\u20B5\".concat(item.amount),\n              color: \"secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 25\n            }, _this),\n            subheader: item.availability\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            href: \"/bouquet/\".concat(item.slug),\n            children: /*#__PURE__*/_jsxDEV(LazyLoadImage, {\n              delayTime: 500,\n              placeholderSrc: \"https://res.cloudinary.com/deyudesls/image/upload/c_scale,q_100,w_200/v1627491504/flowersghana%20logo.webp\",\n              effect: \"blur\",\n              src: \"https://res.cloudinary.com/deyudesls/image/upload/c_scale,h_516,w_387/\".concat(item.img),\n              alt: item.title,\n              className: \"lazy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(AddToCartComponent, {\n            itemTitle: item.title,\n            itemPrice: item.amount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, _this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, _this);\n    }), slug !== undefined && bouquets.length > 0 && returned === true && /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      md: 12,\n      children: /*#__PURE__*/_jsxDEV(Pagin, {\n        pageCount: 3,\n        pageIndex: pageIndex,\n        setPageIndex: setPageIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(HomeContent, \"d0RucZe81Jv3y8VNqAsxOp29L34=\", false, function () {\n  return [useRouter];\n});\n\n_c = HomeContent;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeContent\");","map":{"version":3,"sources":["/Users/mac/codespace/flowerghana/calls/categoryContent.js"],"names":["Grid","DataStore","Predicates","useState","useEffect","Bouquets","useRouter","Link","Backdrop","CardHeader","AddToCartComponent","SimpleSnackbar","stateStore","Pagin","Custom404Component","LazyLoadImage","CardContent","Chip","HomeContent","router","slug","query","bouquets","setBouquets","returned","setReturned","done","state","pageIndex","setPageIndex","fetchPosts","undefined","item","or","category","page","limit","bouquetsData","ALL","length","tags","description","subscription","observe","subscribe","unsubscribe","map","i","minHeight","title","amount","availability","img"],"mappings":"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","sourcesContent":["import Grid from \"@material-ui/core/Grid\";\nimport { DataStore, Predicates } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Bouquets } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Backdrop from \"../components/loader/backdrop\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport AddToCartComponent from \"../cart/addToCart\";\nimport SimpleSnackbar from \"../cart/snackbar\";\nimport { stateStore } from \"../cart/store\";\nimport Pagin from \"../components/utils/pagination\";\nimport Custom404Component from \"../components/utils/custom404\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\nimport { CardContent } from \"@material-ui/core\";\nimport Chip from \"@material-ui/core/Chip\";\n\nexport default function HomeContent() {\n  const router = useRouter();\n  let slug = router.query.slug;\n  const [bouquets, setBouquets] = useState([]);\n  const [returned, setReturned] = useState(true);\n  const done = stateStore((state) => state.done);\n  const [pageIndex, setPageIndex] = useState(0);\n\n  useEffect(() => {\n    fetchPosts();\n    async function fetchPosts() {\n      if (slug === undefined) {\n        const bouquetsData = await DataStore.query(\n          Bouquets,\n          (item) =>\n            item.or((item) =>\n              item\n                .category(\"contains\", \"featured\")\n                .category(\"contains\", \"popular\")\n            ),\n          {\n            page: 0,\n            limit: 18,\n          }\n        );\n        setBouquets(bouquetsData);\n      } else if (slug === \"all\") {\n        const bouquetsData = await DataStore.query(Bouquets, Predicates.ALL, {\n          page: pageIndex,\n          limit: 18,\n        });\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      } else {\n        const bouquetsData = await DataStore.query(\n          Bouquets,\n          (item) =>\n            item.or((item) =>\n              item\n                .category(\"contains\", slug)\n                .tags(\"contains\", slug)\n                .description(\"contains\", slug)\n            ),\n          {\n            page: pageIndex,\n            limit: 18,\n          }\n        );\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      }\n    }\n    const subscription = DataStore.observe(Bouquets).subscribe(() =>\n      fetchPosts()\n    );\n    return () => subscription.unsubscribe();\n  }, [pageIndex]);\n\n  return (\n    <>\n      {bouquets.length < 1 && returned === true && (\n        <>\n          <Backdrop />\n        </>\n      )}\n\n      {bouquets.length < 1 && returned === false && (\n        <>\n          <Custom404Component />\n        </>\n      )}\n\n      {done === true && (\n        <SimpleSnackbar message={\"Item has been added to cart\"} />\n      )}\n      {bouquets.map((item, i) => {\n        return (\n          <Grid item xs={6} md={4} key={i}>\n            <Link href={`/bouquet/${item.slug}`}>\n              <CardHeader\n                style={{ minHeight: 100 }}\n                title={item.title}\n                avatar={<Chip label={`₵${item.amount}`} color=\"secondary\" />}\n                subheader={item.availability}\n              />\n            </Link>\n            <CardContent>\n              <Link href={`/bouquet/${item.slug}`}>\n                <LazyLoadImage\n                  delayTime={500}\n                  placeholderSrc={`https://res.cloudinary.com/deyudesls/image/upload/c_scale,q_100,w_200/v1627491504/flowersghana%20logo.webp`}\n                  effect=\"blur\"\n                  src={`https://res.cloudinary.com/deyudesls/image/upload/c_scale,h_516,w_387/${item.img}`}\n                  alt={item.title}\n                  className=\"lazy\"\n                />\n              </Link>\n              <AddToCartComponent\n                itemTitle={item.title}\n                itemPrice={item.amount}\n              />\n            </CardContent>\n          </Grid>\n        );\n      })}\n\n      {slug !== undefined && bouquets.length > 0 && returned === true && (\n        <Grid item xs={12} md={12}>\n          <Pagin\n            pageCount={3}\n            pageIndex={pageIndex}\n            setPageIndex={setPageIndex}\n          />\n        </Grid>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}