{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/mac/codespace/flowerghana/calls/categoryContent.js\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { DataStore, Predicates } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Bouquets } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Backdrop from \"../components/loader/backdrop\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport AddToCartComponent from \"../cart/addToCart\";\nimport SimpleSnackbar from \"../cart/snackbar\";\nimport { stateStore } from \"../cart/store\";\nimport Pagin from \"../components/utils/pagination\";\nimport Custom404Component from \"../components/utils/custom404\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\nimport { CardContent } from \"@material-ui/core\";\nimport Chip from \"@material-ui/core/Chip\";\nexport default function HomeContent() {\n  const router = useRouter();\n  let slug = router.query.slug;\n  const {\n    0: bouquets,\n    1: setBouquets\n  } = useState([]);\n  const {\n    0: returned,\n    1: setReturned\n  } = useState(true);\n  const done = stateStore(state => state.done);\n  const {\n    0: pageIndex,\n    1: setPageIndex\n  } = useState(0);\n  useEffect(() => {\n    fetchPosts();\n\n    async function fetchPosts() {\n      if (slug === undefined) {\n        const bouquetsData = await DataStore.query(Bouquets, item => item.or(item => item.category(\"contains\", \"featured\").category(\"contains\", \"popular\")), {\n          page: 0,\n          limit: 18\n        });\n        setBouquets(bouquetsData);\n      } else if (slug === \"all\") {\n        const bouquetsData = await DataStore.query(Bouquets, Predicates.ALL, {\n          page: pageIndex,\n          limit: 18\n        });\n\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      } else {\n        const bouquetsData = await DataStore.query(Bouquets, item => item.or(item => item.category(\"contains\", slug).tags(\"contains\", slug).description(\"contains\", slug)), {\n          page: pageIndex,\n          limit: 18\n        });\n\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      }\n    }\n\n    const subscription = DataStore.observe(Bouquets).subscribe(() => fetchPosts());\n    return () => subscription.unsubscribe();\n  }, [pageIndex]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [bouquets.length < 1 && returned === true && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), bouquets.length < 1 && returned === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Custom404Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), done === true && /*#__PURE__*/_jsxDEV(SimpleSnackbar, {\n      message: \"Item has been added to cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), bouquets.map((item, i) => {\n      return /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 6,\n        md: 4,\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: `/bouquet/${item.slug}`,\n          children: /*#__PURE__*/_jsxDEV(CardHeader, {\n            style: {\n              minHeight: 100\n            },\n            title: item.title,\n            avatar: /*#__PURE__*/_jsxDEV(Chip, {\n              label: `₵${item.amount}`,\n              color: \"secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 25\n            }, this),\n            subheader: item.availability\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            href: `/bouquet/${item.slug}`,\n            children: /*#__PURE__*/_jsxDEV(LazyLoadImage, {\n              delayTime: 500,\n              placeholderSrc: `https://res.cloudinary.com/deyudesls/image/upload/c_scale,q_100,w_200/v1627491504/flowersghana%20logo.webp`,\n              effect: \"blur\",\n              src: `https://res.cloudinary.com/deyudesls/image/upload/c_scale,h_516,w_387/${item.img}`,\n              alt: item.title,\n              className: \"lazy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(AddToCartComponent, {\n            itemTitle: item.title,\n            itemPrice: item.amount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this);\n    }), slug !== undefined && bouquets.length > 0 && returned === true && /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      md: 12,\n      children: /*#__PURE__*/_jsxDEV(Pagin, {\n        pageCount: 3,\n        pageIndex: pageIndex,\n        setPageIndex: setPageIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["/Users/mac/codespace/flowerghana/calls/categoryContent.js"],"names":["Grid","DataStore","Predicates","useState","useEffect","Bouquets","useRouter","Link","Backdrop","CardHeader","AddToCartComponent","SimpleSnackbar","stateStore","Pagin","Custom404Component","LazyLoadImage","CardContent","Chip","HomeContent","router","slug","query","bouquets","setBouquets","returned","setReturned","done","state","pageIndex","setPageIndex","fetchPosts","undefined","bouquetsData","item","or","category","page","limit","ALL","length","tags","description","subscription","observe","subscribe","unsubscribe","map","i","minHeight","title","amount","availability","img"],"mappings":"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","sourcesContent":["import Grid from \"@material-ui/core/Grid\";\nimport { DataStore, Predicates } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Bouquets } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport Backdrop from \"../components/loader/backdrop\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport AddToCartComponent from \"../cart/addToCart\";\nimport SimpleSnackbar from \"../cart/snackbar\";\nimport { stateStore } from \"../cart/store\";\nimport Pagin from \"../components/utils/pagination\";\nimport Custom404Component from \"../components/utils/custom404\";\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\nimport \"react-lazy-load-image-component/src/effects/blur.css\";\nimport { CardContent } from \"@material-ui/core\";\nimport Chip from \"@material-ui/core/Chip\";\n\nexport default function HomeContent() {\n  const router = useRouter();\n  let slug = router.query.slug;\n  const [bouquets, setBouquets] = useState([]);\n  const [returned, setReturned] = useState(true);\n  const done = stateStore((state) => state.done);\n  const [pageIndex, setPageIndex] = useState(0);\n\n  useEffect(() => {\n    fetchPosts();\n    async function fetchPosts() {\n      if (slug === undefined) {\n        const bouquetsData = await DataStore.query(\n          Bouquets,\n          (item) =>\n            item.or((item) =>\n              item\n                .category(\"contains\", \"featured\")\n                .category(\"contains\", \"popular\")\n            ),\n          {\n            page: 0,\n            limit: 18,\n          }\n        );\n        setBouquets(bouquetsData);\n      } else if (slug === \"all\") {\n        const bouquetsData = await DataStore.query(Bouquets, Predicates.ALL, {\n          page: pageIndex,\n          limit: 18,\n        });\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      } else {\n        const bouquetsData = await DataStore.query(\n          Bouquets,\n          (item) =>\n            item.or((item) =>\n              item\n                .category(\"contains\", slug)\n                .tags(\"contains\", slug)\n                .description(\"contains\", slug)\n            ),\n          {\n            page: pageIndex,\n            limit: 18,\n          }\n        );\n        if (bouquetsData.length < 1) {\n          setReturned(false);\n        } else {\n          setBouquets(bouquetsData);\n        }\n      }\n    }\n    const subscription = DataStore.observe(Bouquets).subscribe(() =>\n      fetchPosts()\n    );\n    return () => subscription.unsubscribe();\n  }, [pageIndex]);\n\n  return (\n    <>\n      {bouquets.length < 1 && returned === true && (\n        <>\n          <Backdrop />\n        </>\n      )}\n\n      {bouquets.length < 1 && returned === false && (\n        <>\n          <Custom404Component />\n        </>\n      )}\n\n      {done === true && (\n        <SimpleSnackbar message={\"Item has been added to cart\"} />\n      )}\n      {bouquets.map((item, i) => {\n        return (\n          <Grid item xs={6} md={4} key={i}>\n            <Link href={`/bouquet/${item.slug}`}>\n              <CardHeader\n                style={{ minHeight: 100 }}\n                title={item.title}\n                avatar={<Chip label={`₵${item.amount}`} color=\"secondary\" />}\n                subheader={item.availability}\n              />\n            </Link>\n            <CardContent>\n              <Link href={`/bouquet/${item.slug}`}>\n                <LazyLoadImage\n                  delayTime={500}\n                  placeholderSrc={`https://res.cloudinary.com/deyudesls/image/upload/c_scale,q_100,w_200/v1627491504/flowersghana%20logo.webp`}\n                  effect=\"blur\"\n                  src={`https://res.cloudinary.com/deyudesls/image/upload/c_scale,h_516,w_387/${item.img}`}\n                  alt={item.title}\n                  className=\"lazy\"\n                />\n              </Link>\n              <AddToCartComponent\n                itemTitle={item.title}\n                itemPrice={item.amount}\n              />\n            </CardContent>\n          </Grid>\n        );\n      })}\n\n      {slug !== undefined && bouquets.length > 0 && returned === true && (\n        <Grid item xs={12} md={12}>\n          <Pagin\n            pageCount={3}\n            pageIndex={pageIndex}\n            setPageIndex={setPageIndex}\n          />\n        </Grid>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}