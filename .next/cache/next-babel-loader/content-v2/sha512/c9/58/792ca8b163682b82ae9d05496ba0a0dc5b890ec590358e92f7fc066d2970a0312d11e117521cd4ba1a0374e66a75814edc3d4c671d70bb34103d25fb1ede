{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/codespace/flowerghana/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/mac/codespace/flowerghana/calls/fetchReviews.js\",\n    _s = $RefreshSig$();\n\nimport { DataStore, Predicates, SortDirection } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Reviews } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Pagin from \"../components/utils/pagination\";\nimport { Grid } from \"@material-ui/core\";\nimport Backdrop from \"../components/loader/backdrop\";\nexport default function FetchReviews() {\n  _s();\n\n  var _this = this;\n\n  var router = useRouter();\n  var path = router.asPath;\n\n  var _useState = useState([]),\n      reviews = _useState[0],\n      setReviews = _useState[1];\n\n  var _useState2 = useState(0),\n      pageIndex = _useState2[0],\n      setPageIndex = _useState2[1];\n\n  var _useState3 = useState(true),\n      returned = _useState3[0],\n      setReturned = _useState3[1];\n\n  useEffect(function () {\n    fetchPosts();\n\n    function fetchPosts() {\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    function _fetchPosts() {\n      _fetchPosts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var reviewsData, _reviewsData;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(path === \"/\")) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 3;\n                return DataStore.query(Reviews, Predicates.ALL, {\n                  page: 0,\n                  limit: 5\n                }, {\n                  sort: function sort(s) {\n                    return s.review(SortDirection.ASCENDING);\n                  }\n                });\n\n              case 3:\n                reviewsData = _context.sent;\n                setReviews(reviewsData);\n                _context.next = 11;\n                break;\n\n              case 7:\n                _context.next = 9;\n                return DataStore.query(Reviews, Predicates.ALL, {\n                  page: pageIndex,\n                  limit: 10\n                }, {\n                  sort: function sort(s) {\n                    return s.review(SortDirection.ASCENDING);\n                  }\n                });\n\n              case 9:\n                _reviewsData = _context.sent;\n\n                if (_reviewsData.length < 1) {\n                  setReturned(false);\n                } else {\n                  setReviews(_reviewsData);\n                }\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchPosts.apply(this, arguments);\n    }\n\n    var subscription = DataStore.observe(Reviews).subscribe(function () {\n      return fetchPosts();\n    });\n    return function () {\n      return subscription.unsubscribe();\n    };\n  }, [pageIndex]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [reviews.length < 1 && returned === true && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), reviews.length < 1 && returned === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Custom404Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), path === \"/\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: reviews.map(function (review, i) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: i === 0 || i === 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"sl-details\", {\n              summary: \"\".concat(review.name),\n              open: true,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.review\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 23\n              }, _this)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 21\n            }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, _this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"sl-details\", {\n              summary: \"\".concat(review.name),\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.review\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 23\n              }, _this)\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 21\n            }, _this)]\n          }, void 0, true)\n        }, void 0, false);\n      })\n    }, void 0, false), path === \"/reviews\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: reviews.map(function (review, i) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"sl-details\", {\n            summary: \"\".concat(review.name),\n            open: true,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: review.review\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, _this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true);\n      })\n    }, void 0, false), path !== \"/\" && /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      md: 12,\n      children: /*#__PURE__*/_jsxDEV(Pagin, {\n        pageCount: 3,\n        pageIndex: pageIndex,\n        setPageIndex: setPageIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(FetchReviews, \"Qkparn6a/uiHpBjhTOHDXkQiaP0=\", false, function () {\n  return [useRouter];\n});\n\n_c = FetchReviews;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchReviews\");","map":{"version":3,"sources":["/Users/mac/codespace/flowerghana/calls/fetchReviews.js"],"names":["DataStore","Predicates","SortDirection","useState","useEffect","Reviews","useRouter","Pagin","Grid","Backdrop","FetchReviews","router","path","asPath","reviews","setReviews","pageIndex","setPageIndex","returned","setReturned","fetchPosts","query","ALL","page","limit","sort","s","review","ASCENDING","reviewsData","length","subscription","observe","subscribe","unsubscribe","map","i","name"],"mappings":"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","sourcesContent":["import { DataStore, Predicates, SortDirection } from \"aws-amplify\";\nimport { useState, useEffect } from \"react\";\nimport { Reviews } from \"../media/models\";\nimport { useRouter } from \"next/router\";\nimport Pagin from \"../components/utils/pagination\";\nimport { Grid } from \"@material-ui/core\";\nimport Backdrop from \"../components/loader/backdrop\";\n\nexport default function FetchReviews() {\n  const router = useRouter();\n  let path = router.asPath;\n  const [reviews, setReviews] = useState([]);\n  const [pageIndex, setPageIndex] = useState(0);\n  const [returned, setReturned] = useState(true);\n\n  useEffect(() => {\n    fetchPosts();\n    async function fetchPosts() {\n      if (path === \"/\") {\n        const reviewsData = await DataStore.query(\n          Reviews,\n          Predicates.ALL,\n          {\n            page: 0,\n            limit: 5,\n          },\n          {\n            sort: (s) => s.review(SortDirection.ASCENDING),\n          }\n        );\n        setReviews(reviewsData);\n      } else {\n        const reviewsData = await DataStore.query(\n          Reviews,\n          Predicates.ALL,\n          {\n            page: pageIndex,\n            limit: 10,\n          },\n          {\n            sort: (s) => s.review(SortDirection.ASCENDING),\n          }\n        );\n        if (reviewsData.length < 1) {\n          setReturned(false);\n        } else {\n          setReviews(reviewsData);\n        }\n      }\n    }\n    const subscription = DataStore.observe(Reviews).subscribe(() =>\n      fetchPosts()\n    );\n    return () => subscription.unsubscribe();\n  }, [pageIndex]);\n\n  return (\n    <>\n      {reviews.length < 1 && returned === true && (\n        <>\n          <Backdrop />\n        </>\n      )}\n\n      {reviews.length < 1 && returned === false && (\n        <>\n          <Custom404Component />\n        </>\n      )}\n      {path === \"/\" && (\n        <>\n          {reviews.map((review, i) => {\n            return (\n              <>\n                {i === 0 || i === 1 ? (\n                  <>\n                    <sl-details summary={`${review.name}`} key={i} open>\n                      <p>{review.review}</p>\n                    </sl-details>\n                    <br />\n                  </>\n                ) : (\n                  <>\n                    <sl-details summary={`${review.name}`} key={i}>\n                      <p>{review.review}</p>\n                    </sl-details>\n                    <br />\n                  </>\n                )}\n              </>\n            );\n          })}\n        </>\n      )}\n\n      {path === \"/reviews\" && (\n        <>\n          {reviews.map((review, i) => {\n            return (\n              <>\n                <sl-details summary={`${review.name}`} key={i} open>\n                  <p>{review.review}</p>\n                </sl-details>\n                <br />\n              </>\n            );\n          })}\n        </>\n      )}\n      {path !== \"/\" && (\n        <Grid item xs={12} md={12}>\n          <Pagin\n            pageCount={3}\n            pageIndex={pageIndex}\n            setPageIndex={setPageIndex}\n          />\n        </Grid>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}